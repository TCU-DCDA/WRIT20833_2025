<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slide 2 Animation - From Structure to Style</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: #1a1a1a;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        #canvas-container {
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>
    <div id="canvas-container"></div>

    <script>
        let wireframeElements = [];
        let styleLayer = [];
        let transitionProgress = 0;
        let phase = 0; // 0: wireframe, 1: transition, 2: styled

        function setup() {
            let canvas = createCanvas(900, 600);
            canvas.parent('canvas-container');

            // Define wireframe structure (HTML semantic elements)
            wireframeElements = [
                { type: 'header', x: 100, y: 80, w: 700, h: 60, label: '<header>' },
                { type: 'nav', x: 100, y: 160, w: 700, h: 40, label: '<nav>' },
                { type: 'main', x: 100, y: 220, w: 480, h: 280, label: '<main>' },
                { type: 'aside', x: 600, y: 220, w: 200, h: 280, label: '<aside>' },
                { type: 'footer', x: 100, y: 520, w: 700, h: 40, label: '<footer>' }
            ];

            // Define style properties for each element
            styleLayer = [
                {
                    type: 'header',
                    bg: [41, 128, 185],
                    text: 'Brand Identity',
                    fontSize: 24,
                    padding: 15
                },
                {
                    type: 'nav',
                    bg: [52, 73, 94],
                    text: 'Navigation',
                    fontSize: 14,
                    padding: 10
                },
                {
                    type: 'main',
                    bg: [236, 240, 241],
                    text: 'Primary Content',
                    fontSize: 18,
                    textColor: [44, 62, 80],
                    padding: 20
                },
                {
                    type: 'aside',
                    bg: [189, 195, 199],
                    text: 'Supplemental',
                    fontSize: 12,
                    textColor: [52, 73, 94],
                    padding: 15
                },
                {
                    type: 'footer',
                    bg: [44, 62, 80],
                    text: 'Site Info',
                    fontSize: 11,
                    padding: 10
                }
            ];
        }

        function draw() {
            background(26, 26, 26);

            // Phase management - slower timing
            if (frameCount > 240 && frameCount < 420) {
                phase = 1;
                transitionProgress = map(frameCount, 240, 420, 0, 1);
                transitionProgress = easeInOutCubic(transitionProgress);
            } else if (frameCount >= 420) {
                phase = 2;
                transitionProgress = 1;
            }

            // Draw title
            drawTitle();

            // Draw wireframe or styled version
            if (phase === 0) {
                drawWireframe(1);
            } else if (phase === 1) {
                drawWireframe(1 - transitionProgress);
                drawStyled(transitionProgress);
                drawTransitionEffects();
            } else {
                drawStyled(1);
                drawRhetoricalAnnotations();
            }

            // Draw legend
            drawLegend();
        }

        function drawTitle() {
            textAlign(CENTER, TOP);
            textSize(20);
            fill(255, 255, 255, 200);
            text('From Structure to Style', width/2, 20);

            // Instructions
            textSize(11);
            fill(150, 150, 150, 180);
            text('Click or press SPACE to restart', width/2, 50);
        }

        function drawWireframe(alpha) {
            alpha = alpha * 255;

            wireframeElements.forEach(el => {
                // Draw wireframe box
                stroke(100, 200, 255, alpha);
                strokeWeight(2);
                noFill();
                rect(el.x, el.y, el.w, el.h);

                // Draw label
                fill(100, 200, 255, alpha);
                noStroke();
                textAlign(LEFT, TOP);
                textSize(12);
                text(el.label, el.x + 10, el.y + 10);

                // Draw semantic meaning indicator
                textSize(10);
                fill(150, 150, 150, alpha);
                text('semantic structure', el.x + 10, el.y + 30);
            });
        }

        function drawStyled(alpha) {
            alpha = alpha * 255;

            wireframeElements.forEach((el, i) => {
                let style = styleLayer[i];

                // Draw styled background
                noStroke();
                fill(style.bg[0], style.bg[1], style.bg[2], alpha);
                rect(el.x, el.y, el.w, el.h);

                // Draw styled text
                let textCol = style.textColor || [255, 255, 255];
                fill(textCol[0], textCol[1], textCol[2], alpha);
                textAlign(CENTER, CENTER);
                textSize(style.fontSize);
                text(style.text, el.x + el.w/2, el.y + el.h/2);

                // Visual hierarchy indicators (size variation)
                if (alpha > 200) {
                    strokeWeight(1);
                    stroke(255, 255, 255, alpha * 0.3);
                    noFill();
                    rect(el.x - 2, el.y - 2, el.w + 4, el.h + 4);
                }
            });
        }

        function drawTransitionEffects() {
            // Paint brush effect sweeping across
            let sweepX = map(transitionProgress, 0, 1, 0, width);

            push();
            noStroke();

            // Gradient sweep
            for (let i = 0; i < 30; i++) {
                let alpha = map(i, 0, 30, 150, 0);
                fill(46, 204, 113, alpha * transitionProgress);
                rect(sweepX - i * 3, 0, 3, height);
            }

            // CSS property particles
            if (frameCount % 3 === 0) {
                fill(241, 196, 15, 200);
                textSize(10);
                textAlign(LEFT, CENTER);
                let props = ['color', 'background', 'font-size', 'padding', 'margin'];
                let prop = random(props);
                text(prop, sweepX + random(-20, 20), random(height));
            }

            pop();
        }

        function drawRhetoricalAnnotations() {
            let pulse = sin(frameCount * 0.05) * 5;

            // Annotations showing rhetorical effect
            drawAnnotation(450, 110, 'AUTHORITY', [41, 128, 185], pulse);
            drawAnnotation(450, 180, 'GUIDANCE', [52, 73, 94], pulse);
            drawAnnotation(300, 360, 'PRIORITY', [44, 62, 80], pulse);
            drawAnnotation(700, 360, 'SECONDARY', [149, 165, 166], pulse);
            drawAnnotation(450, 545, 'CONTEXT', [52, 73, 94], pulse);
        }

        function drawAnnotation(x, y, text, color, pulse) {
            push();
            translate(x, y);

            // Glow
            fill(color[0], color[1], color[2], 40);
            noStroke();
            textAlign(CENTER, CENTER);
            textSize(12 + pulse * 0.3);
            text(text, 0, 0);

            // Text
            fill(color[0], color[1], color[2], 200);
            textSize(11);
            textStyle(ITALIC);
            text(text, 0, 0);

            pop();
        }

        function drawLegend() {
            let y = height - 30;

            textAlign(LEFT, CENTER);
            textSize(11);

            if (phase === 0) {
                fill(100, 200, 255, 200);
                text('HTML Structure: Semantic meaning', 20, y);
            } else if (phase === 1) {
                fill(46, 204, 113, 200);
                text('Applying CSS: Visual transformation', 20, y);
            } else {
                fill(241, 196, 15, 200);
                text('Styled Design: Rhetorical hierarchy', 20, y);
            }

            // Progress indicator
            noFill();
            stroke(255, 255, 255, 100);
            strokeWeight(1);
            rect(width - 120, y - 8, 100, 16);

            fill(46, 204, 113, 200);
            noStroke();
            rect(width - 120, y - 8, 100 * (frameCount / 540), 16);
        }

        // Click to restart animation
        function mousePressed() {
            frameCount = 0;
            phase = 0;
            transitionProgress = 0;
        }

        // Spacebar to restart
        function keyPressed() {
            if (key === ' ') {
                frameCount = 0;
                phase = 0;
                transitionProgress = 0;
            }
        }

        function easeInOutCubic(t) {
            return t < 0.5
                ? 4 * t * t * t
                : 1 - Math.pow(-2 * t + 2, 3) / 2;
        }
    </script>
</body>
</html>
